<% @products.each_with_index do |p,i| %>
  <div class="card-product m-3">
    <% if p.photos %>
      <!-- Carrousel -->
      <div id="product-carousel-<%=i%>" class="carousel slide" data-ride="carousel">
        <div class="carousel-inner">
          <% p.photos.each_with_index do |photo, i| %>
            <div class="carousel-item <%= "active" if i == 0 %>">
              <%= cl_image_tag photo.key, height: 300, width: 400, crop: :fill, class: "d-block w-100" %>
            </div>
          <% end %>
        </div>
        <a class="carousel-control-prev" href="#product-carousel-<%=i%>" role="button" data-slide="prev">
          <span class="carousel-control-prev-icon" aria-hidden="true"></span>
          <span class="sr-only">Previous</span>
        </a>
        <a class="carousel-control-next" href="#product-carousel-<%=i%>" role="button" data-slide="next">
          <span class="carousel-control-next-icon" aria-hidden="true"></span>
          <span class="sr-only">Next</span>
        </a>
      </div>
      <% else %>
        <img src="https://raw.githubusercontent.com/lewagon/fullstack-images/master/uikit/skateboard.jpg" />
      <% end %>
      <div class="card-product-infos">
        <h2>
          <%= p.title %>
        </h2>
        <p>
          <%= p.description %>
          <%= "#{p.price} â‚¬ / day " %>
          <%= "by #{User.find(p.user_id).first_name}" %>
        </p>
      </div>
  </div>
<% end %>